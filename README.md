# CarsAuction
CarsAuction - фуллстек-приложение, созданное на основе курса с сайта [udemy.com](https://www.udemy.com/course/build-a-microservices-app-with-dotnet-and-nextjs-from-scratch). Приложение представляет собой аукцион по покупке/продаже машин. Бэкэнд написан на C#, фронт - с использованием фреймфорка Next.js и Typescript'а.
## Микросервисы
Приложение состоит из шести микросервисов, каждый из которых ответственен за отдельный функционал. Для связи микросервисов использутся брокер сообщений RabbitMq на основе шины Mass Transit. Также использутся синхронное получение данных с помощью gRPC. Точкой входа в приложение выступает прокси-сервер nginx, который требует защищенного https подключения. Далее трафик идет уже по протоколу http.
### Identity service
Сервис аутентификации пользователей на основе Duende Identity Server. 
### Auction service
Основной сервис для управления аукционами. С его помощью можно получать, создавать, изменять и удалять аукционы.
### Search service
Сервис поиска аукционов
### Notification service
Единственная задача этого сервиса - отправка уведомлений клиенту о событиях, связанных с аукционом (например, создание аукциона или его завершение). Для отправки сообщений используется SignalR.
### Bidding service
Сервис управления аукционными заявками. С его помощью можно создавать заявку, а также получать список всех заявок по конкретному лоту. Также содежит сервис проверки завершения аукциона.
### Gateway service
Сервис на основе Yarp reverse-proxy. Его задача состоит в валидации и маршрутизации входящих запросов с клиента.
## Установка и запуск приложения
- С помощью терминала клонируйте текущий репозиторий следующей git командой:
  ```
  git clone https://github.com/akaWild/CarsAuction.git
  ```
- Измените текущую директорию
  ```
  cd CarsAuction
  ```
- Убедитесь, что на вашем компьютере установлен и настроен [Docker Desktop](https://docs.docker.com/desktop/)
- Выполните следующую команду для билда докер-образов
  ```
  docker compose build
  ```
- После запустите сервисы с помощью команды
  ```
  docker compose up -d
  ```
- Так как приложение требует безопасного подключения, необходимо установить SSL сертификат. Это можно сделать с помощью утилиты [mkcert](https://github.com/FiloSottile/mkcert)
  ```
  mkcert -install
  ```
- Далее необходимо создать файл сертификата и ключа. Сначала нужно перейти в директорию, где будут храниться эти файлы
  ```
  cd devcerts
  ```
- Потом выполнить команду
  ```
  mkcert -key-file carsauction.com.key -cert-file carsauction.com.crt app.carsauction.com api.carsauction.com id.carsauction.com
  ```
- И последнее, что нужно сделать - создать записи в host файле операционной системы, чтобы можно было запускать приложение с использованием доменных имен (вот [гайд](https://phoenixnap.com/kb/how-to-edit-hosts-file-in-windows-mac-or-linux))
  ```
  127.0.0.1 id.carsauction.com app.carsauction.com api.carsauction.com
  ```
- Теперь можно в браузере ввести https://app.carsauction.com и начать пользоваться приложением
